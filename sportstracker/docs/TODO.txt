SportsTracker-TODO
==================

Java 8 support status (in branch java_8):
- required JDK 8 EA (build 106), set JAVA_HOME to the install directory, e.g.
  export JAVA_HOME=~/Utils/NoBackup/jdk1.8.0.jdk/Contents/Home/
- all SportsTracker modules are now compiling in JDK 8 mode
  - only st-exerciseviewer is still in JDK 7 mode, because the 
    groovy-eclipse-compiler for mixed Java/Groovy compilation does not support
    JDK 8 mode yet => change as soon as support is available
- IDE support:
  - Eclipse has problems with JDK 8 support, the modules are running in 1.4 mode
  - IDEA works fine since version 12.1.5, no problems so far
    -> requires antlr dependency for Groovy compilation (added)
  - NetBeans 7.4 works fine, but not perfect
  => IDEA is currently the best choice
- full use of Lambdas in module st-util and sportstracker (st-exerciseviewer
  is still in Java 7 mode, because of mixed Groovy/Java compilation)

Java 8 TODOs:
- use new Java Date API
  - completed in module st-util and sportstracker
    - continue in st-exerciseviewer
  - test needs to be done for:
    - exercise, weight, note dialog
    - STControllerImpl.displayCorruptExercises()
    - create copy of exercise, weight, note in calendar view -> check date and time, must be selected day at 12:00
    - create copy of exercise, weight, note -> check date and time, must be today at 12:00
    - check date column in exercise, note and weight list view - is format OK?
    - exercise filter: check that exercises on filter start or end date are found
    - FilterDialog: test buttons for current week, month, year, ever (also with sunday as first day)
    - OverviewDialog: check all diagram date types, compare with old version
      - check that year marker is displayed correctly when showing for last 12 months
      - check that the proper number of weeks is displayed in "weeks of year mode"
      - check that first month is calculated properly in "last 12 months" mode
    - Calendar View, month and year navigation, today button -> are all date objects displayed of month (check first and last day)
      - check week numbers for last 10 years

- usage of new Optional class in interfaces for avoiding NullPointerExceptions
- update documentation in ReadMe / website

Dependency Injection:
- use Dagger as an alternative to the Guice framework,
  URL: http://square.github.io/dagger/
  -> almost same interface (JSR 330), but DI done on compilation without 
     reflection instead at runtime 
  -> much faster startup performance
  -> see Devoxx 2013 talk about Dagger from Jake Wharton
- Alternative: Guice 4.0

Mac OS X integration:
- Application name is not displayed in the MenuBar, it shows STMain instead
  => Workaround: pass JVM parameter "-Xdock:name=SportsTracker" on startup
  => Known bug, maybe it will be fixed in next JDK release
- SportsTracker.app works properly, the name is set via JVM parameter there

General TODOs:
--------------

- Update to SwingX 1.6.5 is not possible, swingx-ws 1.0 (map viewer) does not
  work anymore since SwingX 1.6.4 (there was no official update yet)
- Import feature for devices connected via USB
  - New Tab in Options dialog with these settings:
    - Device directory/drive
    - Import directory
    - Default sport type / subtype
    - Default equipment (optional)
- View Track in Google Maps (browser)
  => create local temporary file, see example
- Map tab in Exercise Viewer:
  - improve icons for start/end/lap points
  - slider for progress which shows position and details
- Overview dialog: new display mode for comparing 2 seasons / years:
  (https://sourceforge.net/projects/sportstracker/forums/forum/451565/topic/4435642)
  - add a new diagram option in the selection combobox called "Compare two seasons"
  - in this mode the user gets following input fields:
    - year 1 (default: current year) 
    - year 2 (default: previous year)
    - season start month (default: January) 
  - it must display all the monthly data of year 1 on the left (line graph) and
    year 2 on the right vertical axis (dashed graph)
- Exercise Dialog (and all others): use JFormatedTextField for entering
  distance, duration etc.
- Exercise list view: right mouse click on the column header should open the
  Options Dialog tab for the list view
- translation updates (german, french and spanish are up to date)
- manual starting of Tasks (background) will be simpler in future AFW's,
  improve STController:startActionManually() then
  => https://appframework.dev.java.net/issues/show_bug.cgi?id=39
  => http://kenai.com/jira/browse/BSAF-92 (I've created a new issue in BSAF)
- Batch import for multiple exercise files (e.g. when migrating from Windows 
  Polar software): In the Import dialog the user needs to select the the sport 
  type, the subtype, the intensity and which value from distance, AVG speed or 
  duration needs to be recalculated (because these 3 values in the exercise 
  files does not fit together in most cases) first. Then all selected files 
  will be imported as exercises into SportsTracker. 
- FilterDialog should also make possible to show e.g. all bicycle
  sport subtypes, except those from "ergometer" (hint from Steffen Rehn)

Calendar view/widget:
- horizontal or vertical animation for scrolling through the months
  => create bitmaps of old and new month view and move those (much faster)
  => alternative: fade out and in via alpha channel
- draw small shadows?

Training route/lap support:
- requested by Bernd Mirbach and other users, see mail from Bernd:
- we need a dialog for editing possible routes/laps and the appropriate
  length, ascent and description
- the user can select a predefined route in the exercise dialog and
  the appropriate widgets will be pre-filled
- it should be possible to filter for specific routes for evaluation


ExerciseViewer-TODO
===================

Diagram panel:
- there's no space at the left side when the bottom axis displays "by distance"
  (between left axis and graph start)

Track panel:
- improve rendering for waypoints, use marker pins instead of circles
  (can the WaypointRenderer from SwingX be reused and enhanced?)

ExerciseParsers:
- GarminTcxParser:
  - refactor big method parseExercisePath(...), split into multiple methods
  - parse speed data for Trackpoints if available instead of calculation 
    (available when there's a speed sensor, e.g. on Edge 500 export files) 
  - average speed is wrong when there are pauses in the exercise (Auto-Stop)
- PolarHsrRawParser and PolarSRawParser:
  - Refactor: Extract duplicate methods/code
- HAC4 Parser:
  - more exercise data checks for parser in unit tests
- HRM Parser: 
  - recalculate average heartrate, speed, times within ranges ... from samples,
    there are often wrong values in the appropriate HRM fields (hint from 
    Steffen Rehn) - (Polar Windows software seems to recalculate this too :-)
  - When the monitor displays heartrate and ranges in percent instead in bpm
    the heartrate limit ranges in the HRM files are also stored in percent. 
    But it's not possible yet to determine whether it's bpm (default) or 
    percent. That's why the parses always assumes bpm values.
    (Calculate the BPM values with help of max. heartrate should work ...)  
