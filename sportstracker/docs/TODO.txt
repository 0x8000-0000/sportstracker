SportsTracker-TODO
==================

Before next release:
--------------------
- improve rendering for waypoints, use marker pins instead of circles
  - can the WaypointRenderer from SwingX be reused of enhanced?
  - draw "S", "E" and "1" in start, end and laps waypoints
- add Garmin FIT support to website (also in Metadata)


TrackPanel improvements:
------------------------
- draw text "S" and "E" next to the waypoint circles for start/end position
- is it possible to resuse the text renderer from JXMapViewer? (check JavaDoc and sources)
  (black text on white border background)
- add optional splitPosition attribute to class Lap, fill it in TCX and FIT parser
- display lap positions in track panel with lap number 

  
Support for track data in external GPS files (GPX): 
---------------------------------------------------
- Track data inside Exercise files is already supported (for Garmin FIT and TCX files)
- SportsTracker changes:
  - Exercise object: Add optional trackFile attribut, similar to hrmFile
  - ExerciseDialog:
    - Add below HRM file selection an optional Track file selection
    - Rename "View HRM file" button to "View exercise details".
- ExerciseViewer changes:
  - If a GPS data is in an external file, then store the data in EVExercise.Track class (optional)
    - Track has 1..n TrackPoint objects
    - TrackPoint has the attys:
      - Position
      - Timestamp (optional)
      - Comment (optional, e.g. for Lap split names)
  - add new Flag EVExercise.RecordingMode.locationExternal
    => true when location data is in an external file
  - new Interface TrackParser for loading track files (similar to ExerciseParser)
    - the parser list must use the ServiceLoader API to be extensible
    - the trackParser must return a Track object (see above)
    - initial implementation for GPX files (KML later)
  - ExerciseViewer gets the hrm filename on startup and the optional track filename
    => parses the track file when specified
  - the TrackViewer in ExerciseViewer decides which position data must be displayed
    (internal or external)
  - ExerciseViewer must be able to display the Track data only, when the user does 
    not has a HRM file.


General TODOs:
--------------
- ExerciseViewer Track panel: show way points for laps in map
  - can't be done with the WaypointPainter, it doesn't support any waypoint
    names and is not designed to be mixed with other painters
  => paint lap points and names in my custome track painter, maybe the
     WaypointRenderer can be reused
- Closing dialog with Escape key doesn't work when a JXDatePicker has the focus
- "Copy exercise" feature, see request:
  https://sourceforge.net/tracker/?func=detail&aid=2927194&group_id=133110&atid=726273
- Exercise Dialog (and all others): use JFormatedTextField for entering
  distance, duration etc.
- Exercise list view: right mouse click on the column header should open the
  Options Dialog tab for the list view
- translation updates (german is up to date)
- manual starting of Tasks (background) will be simpler in future AFW's,
  improve STController:startActionManually() then
  => https://appframework.dev.java.net/issues/show_bug.cgi?id=39
  => http://kenai.com/jira/browse/BSAF-92 (I've created a new issue in BSAF)
- Batch import for multiple exercise files (e.g. when migrating from Windows 
  Polar software): In the Import dialog the user needs to select the the sport 
  type, the subtype, the intensity and which value from distance, AVG speed or 
  duration needs to be recalculated (because these 3 values in the exercise 
  files does not fit together in most cases) first. Then all selected files 
  will be imported as exercises into SportsTracker. 
- FilterDialog should also make possible to show e.g. all bicycle
  sport subtypes, except those from "ergometer" (hint from Steffen Rehn)

Calendar view/widget:
- horizontal or vertical animation for scrolling through the months
  => create bitmaps of old and new month view and move those (much faster)
  => alternative: fade out and in via alpha channel
- draw small shadows?

Training route/lap support:
- requested by Bernd Mirbach and other users, see mail from Bernd:
- we need a dialog for editing possible routes/laps and the appropriate
  length, ascent and description
- the user can select a predefined route in the exercise dialog and
  the appropriate widgets will be pre-filled
- it should be possible to filter for specific routes for evaluation


ExerciseViewer-TODO
===================

Diagram panel:
- there's no space at the left side when the bottom axis displays "by distance"
  (between left axis and graph start)

ExerciseParsers:
- GarminTcxParser:
  - refactor big method parseExercisePath(...), split into multiple methods
  - parse speed data for Trackpoints if available instead of calculation 
    (available when there's a speed sensor, e.g. on Edge 500 export files) 
  - average speed is wrong when there are pauses in the exercise (Auto-Stop)
- PolarHsrRawParser and PolarSRawParser:
  - Refactor: Extract duplicate methods/code
- HAC4 Parser:
  - more exercise data checks for parser in unit tests
- HRM Parser: 
  - recalculate average heartrate, speed, times within ranges ... from samples,
    there are often wrong values in the appropriate HRM fields (hint from 
    Steffen Rehn) - (Polar Windows software seems to recalculate this too :-)
  - When the monitor displays heartrate and ranges in percent instead in bpm
    the heartrate limit ranges in the HRM files are also stored in percent. 
    But it's not possible yet to determine whether it's bpm (default) or 
    percent. That's why the parses always assumes bpm values.
    (Calculate the BPM values with help of max. heartrate should work ...)  
